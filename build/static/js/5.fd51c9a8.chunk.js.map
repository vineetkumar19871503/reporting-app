{"version":3,"sources":["config.js","actions/UserAction.js","views/Pages/Login/Login.js"],"names":["module","exports","apiUrl","login","data","type","payload","logout","__webpack_require__","d","__webpack_exports__","Login","props","_this","Object","F_My_Personal_Documents_maksud_reporting_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","F_My_Personal_Documents_maksud_reporting_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","F_My_Personal_Documents_maksud_reporting_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","fields","email","password","errors","bind","F_My_Personal_Documents_maksud_reporting_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","user","keys","length","history","replace","document","title","show","arguments","undefined","ldr","getElementById","classList","remove","add","field","value","assign","setState","e","self","preventDefault","validateForm","showLoader","axios","post","config","then","res","is_err","ToastStore","error","message","push","catch","err","cb","formIsValid","lastAtPos","lastIndexOf","lastDotPos","indexOf","trim","_this2","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","react_toasts__WEBPACK_IMPORTED_MODULE_11__","store","reactstrap__WEBPACK_IMPORTED_MODULE_9__","md","onSubmit","addonType","onChange","changeInput","target","placeholder","autoComplete","xs","color","Component","connect","dispatch"],"mappings":"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","file":"static/js/5.fd51c9a8.chunk.js","sourcesContent":["// let env = process.env;\r\n// console.log(env);\r\nmodule.exports = {\r\n    \"apiUrl\": \"https://my-reporting-app-api.herokuapp.com/api/v1/\",\r\n    // \"apiUrl\": \"http://localhost:3005/api/v1/\"\r\n}","export function login(data) {\r\n    return {\r\n        type: 'LOGIN',\r\n        payload: data\r\n    }\r\n}\r\n\r\nexport function logout() {\r\n    return {\r\n        type: 'LOGOUT'\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport axios from 'axios';\r\nimport { Button, Card, CardBody, CardGroup, Col, Container, Form, Input, InputGroup, InputGroupAddon, InputGroupText, Row } from 'reactstrap';\r\nimport { login } from '../../../actions/UserAction';\r\nimport { ToastContainer, ToastStore } from 'react-toasts';\r\nimport config from '../../../config.js';\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { 'fields': { 'email': 'admin@admin.com', 'password': 'abc@123' }, 'errors': {} };\r\n    this.login = this.login.bind(this);\r\n  }\r\n  componentWillMount() {\r\n    const user = this.props.user;\r\n    if (typeof user === 'object' && Object.keys(user).length) {\r\n      this.props.history.replace('/dashboard');\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    document.title = \"Login\";\r\n  }\r\n  showLoader(show = true) {\r\n    const ldr = document.getElementById('ajax-loader-container');\r\n    show ? ldr.classList.remove('disp-none') : ldr.classList.add('disp-none');\r\n  }\r\n  changeInput(field, value) {\r\n    const state = Object.assign({}, this.state);\r\n    state['fields'][field] = value;\r\n    this.setState(state);\r\n  }\r\n  login(e) {\r\n    const self = this;\r\n    e.preventDefault();\r\n    self.validateForm(() => {\r\n      self.showLoader();\r\n      axios.post(config.apiUrl + 'users/login', self.state['fields'])\r\n        .then(res => {\r\n          self.showLoader(false);\r\n          if (res.data.is_err) {\r\n            ToastStore.error(res.data.message);\r\n          } else {\r\n            self.props.login(res.data.data);\r\n            self.props.history.push('/dashboard');\r\n          }\r\n        })\r\n        .catch(err => {\r\n          self.showLoader(false);\r\n          ToastStore.error(err.message);\r\n        });\r\n    });\r\n  }\r\n  validateForm(cb) {\r\n    let fields = this.state.fields;\r\n    let errors = {};\r\n    let formIsValid = true;\r\n\r\n    //ref: https://stackoverflow.com/questions/41296668/reactjs-form-input-validation\r\n\r\n    //Email\r\n    if (!fields[\"email\"]) {\r\n      formIsValid = false;\r\n      errors[\"email\"] = \"Email cannot be empty\";\r\n    }\r\n    if (typeof fields[\"email\"] !== \"undefined\") {\r\n      let lastAtPos = fields[\"email\"].lastIndexOf('@');\r\n      let lastDotPos = fields[\"email\"].lastIndexOf('.');\r\n      if (!(lastAtPos < lastDotPos && lastAtPos > 0 && fields[\"email\"].indexOf('@@') === -1 && lastDotPos > 2 && (fields[\"email\"].length - lastDotPos) > 2)) {\r\n        formIsValid = false;\r\n        errors[\"email\"] = \"Email is not valid\";\r\n      }\r\n    }\r\n\r\n    //Password\r\n    if (!fields[\"password\"] || !fields['password'].trim().length) {\r\n      formIsValid = false;\r\n      errors[\"password\"] = \"Password can not be empty\";\r\n    }\r\n    this.setState({ errors });\r\n    if (formIsValid) {\r\n      cb();\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"app flex-row align-items-center\">\r\n        <ToastContainer store={ToastStore} />\r\n        <Container>\r\n          <Row className=\"justify-content-center\">\r\n            <Col md=\"8\">\r\n              <CardGroup>\r\n                <Card className=\"p-4\">\r\n                  <CardBody>\r\n                    <Form onSubmit={this.login}>\r\n                      <h1>Login</h1>\r\n                      <p className=\"text-muted\">Sign In to your account</p>\r\n                      <InputGroup className=\"mb-3\">\r\n                        <InputGroupAddon addonType=\"prepend\">\r\n                          <InputGroupText>\r\n                            <i className=\"icon-user\"></i>\r\n                          </InputGroupText>\r\n                        </InputGroupAddon>\r\n                        <Input type=\"text\" value={this.state.fields.email} onChange={e => this.changeInput('email', e.target.value)} placeholder=\"Email\" autoComplete=\"username\" />\r\n                        <span className=\"form-err\">{this.state.errors[\"email\"]}</span>\r\n                      </InputGroup>\r\n                      <InputGroup className=\"mb-4\">\r\n                        <InputGroupAddon addonType=\"prepend\">\r\n                          <InputGroupText>\r\n                            <i className=\"icon-lock\"></i>\r\n                          </InputGroupText>\r\n                        </InputGroupAddon>\r\n                        <Input type=\"password\" value={this.state.fields.password} onChange={e => this.changeInput('password', e.target.value)} placeholder=\"Password\" autoComplete=\"current-password\" />\r\n                        <span className=\"form-err\">{this.state.errors[\"password\"]}</span>\r\n                      </InputGroup>\r\n                      <Row>\r\n                        <Col xs=\"6\">\r\n                          <Button color=\"primary\" className=\"px-4\">Login</Button>\r\n                        </Col>\r\n                        {/* <Col xs=\"6\" className=\"text-right\">\r\n                          <Button color=\"link\" className=\"px-0\">Forgot password?</Button>\r\n                        </Col> */}\r\n                      </Row>\r\n                    </Form>\r\n                  </CardBody>\r\n                </Card>\r\n                {/* <Card className=\"text-white bg-primary py-5 d-md-down-none\" style={{ width: '44%' }}>\r\n                  <CardBody className=\"text-center\">\r\n                    <div>\r\n                      <h2>Sign up</h2>\r\n                      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut\r\n                        labore et dolore magna aliqua.</p>\r\n                      <Link to=\"/register\">\r\n                        <Button color=\"primary\" className=\"mt-3\" active tabIndex={-1}>Register Now!</Button>\r\n                      </Link>\r\n                    </div>\r\n                  </CardBody>\r\n                </Card> */}\r\n              </CardGroup>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    login: (data) => dispatch(login(data))\r\n  }\r\n}\r\nconst mapStateToProps = (store) => {\r\n  return {\r\n    user: store.user\r\n  }\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n"],"sourceRoot":""}