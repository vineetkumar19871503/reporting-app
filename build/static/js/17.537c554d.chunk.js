(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{346:function(e,t,a){"use strict";a.r(t);var r=a(90),s=a(91),n=a(94),l=a(92),i=a(93),o=a(96),c=a(0),m=a.n(c),u=a(95),d=a(264),h=a.n(d),p=a(263),v=a(260),f=a(262),E=a.n(f),g=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(n.a)(this,Object(l.a)(t).call(this,e))).errors={},a.state={fields:{name:"",email:"",password:""},errors:{}},a.saveUser=a.saveUser.bind(Object(o.a)(Object(o.a)(a))),a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"showLoader",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=document.getElementById("ajax-loader-container");e?t.classList.remove("disp-none"):t.classList.add("disp-none")}},{key:"componentDidMount",value:function(){"admin"!==this.props.user.type&&(p.ToastStore.error("You are not authorized to perform this action"),this.props.history.push("/dashboard")),document.title="Edit User";var e=this;e.showLoader(),h.a.get(E.a.apiUrl+"users/getUserById?id="+this.props.match.params.id,{headers:{Authorization:"Bearer "+e.props.user.token}}).then(function(t){e.showLoader(!1);var a=t.data.data[0];e.setState({fields:{name:a.name,email:a.email,password:a.password}})}).catch(function(t){e.showLoader(!1),p.ToastStore.error(t.message)})}},{key:"changeInput",value:function(e,t){var a=Object.assign({},this.state);a.fields[e]=t,this.setState(a)}},{key:"validateForm",value:function(e){var t=!0;this.errors={},t=this._validateField("required","name",t),t=this._validateField("required","email",t),t=this._validateField("email","email",t),t=this._validateField("required","password",t),t=this._validateField("required","status",t),this.setState({errors:this.errors}),t&&e()}},{key:"_validateField",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"required",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=this.state.fields,s=a;if(!this.errors[t]){switch(e){case"required":r[t]&&r[t].trim().length||(s=!1,this.errors[t]="This field cannot be empty");break;case"number":/^\d*$/.test(r[t])||(s=!1,this.errors[t]="Please enter number");break;case"email":var n=r[t].lastIndexOf("@"),l=r[t].lastIndexOf(".");n<l&&n>0&&-1===r[t].indexOf("@@")&&l>2&&r[t].length-l>2||(s=!1,this.errors[t]="Email is not valid");break;default:return}return s}}},{key:"saveUser",value:function(e){e.preventDefault();var t=this;t.validateForm(function(){var e=t.state.fields;e.added_by=t.props.user._id,h.a.post(E.a.apiUrl+"users/add",e,{headers:{Authorization:"Bearer "+t.props.user.token}}).then(function(e){e.data.is_err?p.ToastStore.error(e.data.message):(p.ToastStore.success(e.data.message),t.props.history.push("/users/list"))}).catch(function(e){p.ToastStore.error(e.message)})})}},{key:"render",value:function(){var e=this,t=this.state.fields;return m.a.createElement("div",{className:"animated fadeIn"},m.a.createElement(v.C,null,m.a.createElement(v.j,null,m.a.createElement(v.e,null,m.a.createElement(v.i,null,m.a.createElement("strong",null,"Edit User")),m.a.createElement(v.p,{onSubmit:this.saveUser},m.a.createElement(v.f,null,m.a.createElement(p.ToastContainer,{store:p.ToastStore}),m.a.createElement(v.q,null,m.a.createElement(v.v,{htmlFor:"name"},"Name"),m.a.createElement(v.r,{type:"text",id:"name",value:t.name,onChange:function(t){return e.changeInput("name",t.target.value)},placeholder:"Enter Name"}),m.a.createElement("span",{className:"form-err"},this.state.errors.name)),m.a.createElement(v.q,null,m.a.createElement(v.v,{htmlFor:"email"},"Email"),m.a.createElement(v.r,{type:"text",id:"email",value:t.email,onChange:function(t){return e.changeInput("email",t.target.value)},placeholder:"Enter Email"}),m.a.createElement("span",{className:"form-err"},this.state.errors.email)),m.a.createElement(v.q,null,m.a.createElement(v.v,{htmlFor:"password"},"Password"),m.a.createElement(v.r,{type:"password",id:"password",onChange:function(t){return e.changeInput("password",t.target.value)},placeholder:"Enter Password"}),m.a.createElement("span",{className:"form-err"},this.state.errors.password)),m.a.createElement(v.q,{row:!0},m.a.createElement(v.j,{md:"2"},m.a.createElement(v.v,null,"Status")),m.a.createElement(v.j,{md:"10"},m.a.createElement(v.q,{check:!0,inline:!0,className:"radio"},m.a.createElement(v.r,{className:"form-check-input",onChange:function(t){return e.changeInput("status",t.target.value)},type:"radio",id:"status1",name:"status",value:"true"}),m.a.createElement(v.v,{check:!0,className:"form-check-label",htmlFor:"status1"},"Active")),m.a.createElement(v.q,{check:!0,inline:!0,className:"radio"},m.a.createElement(v.r,{className:"form-check-input",onChange:function(t){return e.changeInput("status",t.target.value)},type:"radio",id:"status2",name:"status",value:"false"}),m.a.createElement(v.v,{check:!0,className:"form-check-label",htmlFor:"status2"},"Inactive")),m.a.createElement("span",{className:"form-err"},this.state.errors.status)))),m.a.createElement(v.g,null,m.a.createElement(v.d,{type:"submit",size:"sm",color:"primary"},"Submit"),m.a.createElement(v.d,{type:"reset",size:"sm",color:"danger"},"Reset")))))))}}]),t}(m.a.Component);t.default=Object(u.b)(function(e){return{user:e.user}})(g)}}]);
//# sourceMappingURL=17.537c554d.chunk.js.map