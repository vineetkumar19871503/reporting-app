{"version":3,"sources":["components/users/EditComponent.js"],"names":["EditUserComponent","props","_this","Object","F_My_Personal_Documents_maksud_reporting_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","F_My_Personal_Documents_maksud_reporting_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","F_My_Personal_Documents_maksud_reporting_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","errors","state","fields","name","email","password","saveUser","bind","F_My_Personal_Documents_maksud_reporting_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","show","arguments","length","undefined","ldr","document","getElementById","classList","remove","add","user","type","ToastStore","error","history","push","title","self","showLoader","axios","get","config","apiUrl","match","params","id","headers","Authorization","token","then","res","data","setState","catch","err","message","field","value","assign","cb","formIsValid","_validateField","isFieldValid","trim","test","lastAtPos","lastIndexOf","lastDotPos","indexOf","e","preventDefault","validateForm","added_by","_id","post","is_err","success","_this2","_f","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","reactstrap__WEBPACK_IMPORTED_MODULE_10__","onSubmit","react_toasts__WEBPACK_IMPORTED_MODULE_9__","store","htmlFor","onChange","changeInput","target","placeholder","row","md","check","inline","size","color","React","Component","connect"],"mappings":"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","file":"static/js/17.537c554d.chunk.js","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport axios from 'axios';\r\nimport { ToastContainer, ToastStore } from 'react-toasts';\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardFooter,\r\n  CardHeader,\r\n  Col,\r\n  Form,\r\n  FormGroup,\r\n  Input,\r\n  Label,\r\n  Row\r\n} from 'reactstrap';\r\nimport config from '../../config.js';\r\nclass EditUserComponent extends React.Component {\r\n  errors = {};\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      'fields': {\r\n        'name': '',\r\n        'email': '',\r\n        'password': ''\r\n      },\r\n      'errors': {}\r\n    };\r\n    this.saveUser = this.saveUser.bind(this);\r\n  }\r\n  showLoader(show = true) {\r\n    const ldr = document.getElementById('ajax-loader-container');\r\n    show ? ldr.classList.remove('disp-none') : ldr.classList.add('disp-none');\r\n  }\r\n  componentDidMount() {\r\n    if (this.props.user.type !== 'admin') {\r\n      ToastStore.error(\"You are not authorized to perform this action\");\r\n      this.props.history.push('/dashboard');\r\n    }\r\n    document.title = \"Edit User\";\r\n    const self = this;\r\n    self.showLoader();\r\n    axios.get(\r\n      config.apiUrl + 'users/getUserById?id=' + this.props.match.params.id,\r\n      {\r\n        'headers': {\r\n          'Authorization': 'Bearer ' + self.props.user.token\r\n        }\r\n      }\r\n    )\r\n      .then(res => {\r\n        self.showLoader(false);\r\n        const user = res.data.data[0];\r\n        self.setState({\r\n          'fields': {\r\n            'name': user.name,\r\n            'email': user.email,\r\n            'password': user.password\r\n          }\r\n        });\r\n      })\r\n      .catch(err => {\r\n        self.showLoader(false);\r\n        ToastStore.error(err.message);\r\n      });\r\n  }\r\n  changeInput(field, value) {\r\n    const state = Object.assign({}, this.state);\r\n    state['fields'][field] = value;\r\n    this.setState(state);\r\n  }\r\n  validateForm(cb) {\r\n    let formIsValid = true;\r\n    this.errors = {};\r\n    formIsValid = this._validateField('required', 'name', formIsValid);\r\n    formIsValid = this._validateField('required', 'email', formIsValid);\r\n    formIsValid = this._validateField('email', 'email', formIsValid);\r\n    formIsValid = this._validateField('required', 'password', formIsValid);\r\n    formIsValid = this._validateField('required', 'status', formIsValid);\r\n    this.setState({ 'errors': this.errors });\r\n    if (formIsValid) {\r\n      cb();\r\n    }\r\n  }\r\n  _validateField(type = 'required', name, formIsValid) {\r\n    let fields = this.state.fields;\r\n    let isFieldValid = formIsValid;\r\n    if (this.errors[name]) {\r\n      return;\r\n    }\r\n    switch (type) {\r\n      case 'required': {\r\n        if (!fields[name] || !fields[name].trim().length) {\r\n          isFieldValid = false;\r\n          this.errors[name] = \"This field cannot be empty\";\r\n        }\r\n        break;\r\n      }\r\n      case 'number': {\r\n        if (!(/^\\d*$/.test(fields[name]))) {\r\n          isFieldValid = false;\r\n          this.errors[name] = \"Please enter number\";\r\n        }\r\n        break;\r\n      }\r\n      case 'email': {\r\n        let lastAtPos = fields[name].lastIndexOf('@');\r\n        let lastDotPos = fields[name].lastIndexOf('.');\r\n        if (!(lastAtPos < lastDotPos && lastAtPos > 0 && fields[name].indexOf('@@') === -1 && lastDotPos > 2 && (fields[name].length - lastDotPos) > 2)) {\r\n          isFieldValid = false;\r\n          this.errors[name] = \"Email is not valid\";\r\n        }\r\n        break;\r\n      }\r\n      default: return;\r\n    }\r\n    return isFieldValid;\r\n  }\r\n  saveUser(e) {\r\n    e.preventDefault();\r\n    const self = this;\r\n    self.validateForm(function () {\r\n      const fields = self.state.fields;\r\n      fields.added_by = self.props.user._id;\r\n      axios.post(\r\n        config.apiUrl + 'users/add',\r\n        fields,\r\n        {\r\n          'headers': {\r\n            'Authorization': 'Bearer ' + self.props.user.token\r\n          }\r\n        }\r\n      )\r\n        .then(res => {\r\n          if (res.data.is_err) {\r\n            ToastStore.error(res.data.message);\r\n          } else {\r\n            ToastStore.success(res.data.message);\r\n            self.props.history.push('/users/list');\r\n          }\r\n        })\r\n        .catch(err => {\r\n          ToastStore.error(err.message);\r\n        });\r\n    });\r\n  }\r\n  render() {\r\n    const _f = this.state.fields;\r\n    return <div className=\"animated fadeIn\">\r\n      <Row>\r\n        <Col>\r\n          <Card>\r\n            <CardHeader>\r\n              <strong>Edit User</strong>\r\n            </CardHeader>\r\n            <Form onSubmit={this.saveUser}>\r\n              <CardBody>\r\n                <ToastContainer store={ToastStore} />\r\n                <FormGroup>\r\n                  <Label htmlFor=\"name\">Name</Label>\r\n                  <Input type=\"text\" id=\"name\" value={_f.name} onChange={e => this.changeInput('name', e.target.value)} placeholder=\"Enter Name\" />\r\n                  <span className=\"form-err\">{this.state.errors[\"name\"]}</span>\r\n                </FormGroup>\r\n                <FormGroup>\r\n                  <Label htmlFor=\"email\">Email</Label>\r\n                  <Input type=\"text\" id=\"email\" value={_f.email} onChange={e => this.changeInput('email', e.target.value)} placeholder=\"Enter Email\" />\r\n                  <span className=\"form-err\">{this.state.errors[\"email\"]}</span>\r\n                </FormGroup>\r\n                <FormGroup>\r\n                  <Label htmlFor=\"password\">Password</Label>\r\n                  <Input type=\"password\" id=\"password\" onChange={e => this.changeInput('password', e.target.value)} placeholder=\"Enter Password\" />\r\n                  <span className=\"form-err\">{this.state.errors[\"password\"]}</span>\r\n                </FormGroup>\r\n                <FormGroup row>\r\n                  <Col md=\"2\">\r\n                    <Label>Status</Label>\r\n                  </Col>\r\n                  <Col md=\"10\">\r\n                    <FormGroup check inline className=\"radio\">\r\n                      <Input className=\"form-check-input\" onChange={e => this.changeInput('status', e.target.value)} type=\"radio\" id=\"status1\" name=\"status\" value=\"true\" />\r\n                      <Label check className=\"form-check-label\" htmlFor=\"status1\">Active</Label>\r\n                    </FormGroup>\r\n                    <FormGroup check inline className=\"radio\">\r\n                      <Input className=\"form-check-input\" onChange={e => this.changeInput('status', e.target.value)} type=\"radio\" id=\"status2\" name=\"status\" value=\"false\" />\r\n                      <Label check className=\"form-check-label\" htmlFor=\"status2\">Inactive</Label>\r\n                    </FormGroup>\r\n                    <span className=\"form-err\">{this.state.errors[\"status\"]}</span>\r\n                  </Col>\r\n                </FormGroup>\r\n              </CardBody>\r\n              <CardFooter>\r\n                <Button type=\"submit\" size=\"sm\" color=\"primary\">Submit</Button>\r\n                <Button type=\"reset\" size=\"sm\" color=\"danger\">Reset</Button>\r\n              </CardFooter>\r\n            </Form>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>;\r\n  }\r\n}\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.user\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(EditUserComponent);"],"sourceRoot":""}