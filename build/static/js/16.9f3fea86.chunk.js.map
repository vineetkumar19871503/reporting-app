{"version":3,"sources":["components/users/AddComponent.js"],"names":["AddUserComponent","props","_this","Object","F_My_Personal_Documents_maksud_reporting_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","F_My_Personal_Documents_maksud_reporting_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","F_My_Personal_Documents_maksud_reporting_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","errors","state","fields","name","email","password","saveUser","bind","F_My_Personal_Documents_maksud_reporting_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","user","type","ToastStore","error","history","push","document","title","field","value","assign","setState","cb","formIsValid","_validateField","arguments","length","undefined","isFieldValid","trim","test","lastAtPos","lastIndexOf","lastDotPos","indexOf","show","ldr","getElementById","classList","remove","add","e","preventDefault","self","validateForm","added_by","_id","showLoader","axios","post","config","apiUrl","headers","Authorization","token","then","res","data","is_err","message","success","catch","err","_this2","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","reactstrap__WEBPACK_IMPORTED_MODULE_10__","onSubmit","react_toasts__WEBPACK_IMPORTED_MODULE_9__","store","htmlFor","id","onChange","changeInput","target","placeholder","row","md","check","inline","size","color","React","Component","connect"],"mappings":"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","file":"static/js/16.9f3fea86.chunk.js","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport axios from 'axios';\r\nimport { ToastContainer, ToastStore } from 'react-toasts';\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardFooter,\r\n  CardHeader,\r\n  Col,\r\n  Form,\r\n  FormGroup,\r\n  Input,\r\n  Label,\r\n  Row\r\n} from 'reactstrap';\r\nimport config from '../../config.js';\r\nclass AddUserComponent extends React.Component {\r\n  errors = {};\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      'fields': {\r\n        'name': '',\r\n        'email': '',\r\n        'password': ''\r\n      },\r\n      'errors': {}\r\n    };\r\n    this.saveUser = this.saveUser.bind(this);\r\n  }\r\n  componentDidMount() {\r\n    if(this.props.user.type!=='admin') {\r\n      ToastStore.error(\"You are not authorized to perform this action\");\r\n      this.props.history.push('/dashboard');\r\n    }\r\n    document.title = \"Add New User\";\r\n  }\r\n  changeInput(field, value) {\r\n    const state = Object.assign({}, this.state);\r\n    state['fields'][field] = value;\r\n    this.setState(state);\r\n  }\r\n  validateForm(cb) {\r\n    let formIsValid = true;\r\n    this.errors = {};\r\n    formIsValid = this._validateField('required', 'name', formIsValid);\r\n    formIsValid = this._validateField('required', 'email', formIsValid);\r\n    formIsValid = this._validateField('email', 'email', formIsValid);\r\n    formIsValid = this._validateField('required', 'password', formIsValid);\r\n    formIsValid = this._validateField('required', 'status', formIsValid);\r\n    this.setState({ 'errors': this.errors });\r\n    if (formIsValid) {\r\n      cb();\r\n    }\r\n  }\r\n  _validateField(type = 'required', name, formIsValid) {\r\n    let fields = this.state.fields;\r\n    let isFieldValid = formIsValid;\r\n    if (this.errors[name]) {\r\n      return;\r\n    }\r\n    switch (type) {\r\n      case 'required': {\r\n        if (!fields[name] || !fields[name].trim().length) {\r\n          isFieldValid = false;\r\n          this.errors[name] = \"This field cannot be empty\";\r\n        }\r\n        break;\r\n      }\r\n      case 'number': {\r\n        if (!(/^\\d*$/.test(fields[name]))) {\r\n          isFieldValid = false;\r\n          this.errors[name] = \"Please enter number\";\r\n        }\r\n        break;\r\n      }\r\n      case 'email': {\r\n        let lastAtPos = fields[name].lastIndexOf('@');\r\n        let lastDotPos = fields[name].lastIndexOf('.');\r\n        if (!(lastAtPos < lastDotPos && lastAtPos > 0 && fields[name].indexOf('@@') === -1 && lastDotPos > 2 && (fields[name].length - lastDotPos) > 2)) {\r\n          isFieldValid = false;\r\n          this.errors[name] = \"Email is not valid\";\r\n        }\r\n        break;\r\n      }\r\n      default: return;\r\n    }\r\n    return isFieldValid;\r\n  }\r\n  showLoader(show = true) {\r\n    const ldr = document.getElementById('ajax-loader-container');\r\n    show ? ldr.classList.remove('disp-none') : ldr.classList.add('disp-none');\r\n  }\r\n  saveUser(e) {\r\n    e.preventDefault();\r\n    const self = this;\r\n    self.validateForm(function () {\r\n      const fields = self.state.fields;\r\n      fields.added_by = self.props.user._id;\r\n      self.showLoader();\r\n      axios.post(\r\n        config.apiUrl + 'users/add',\r\n        fields,\r\n        {\r\n          'headers': {\r\n            'Authorization': 'Bearer ' + self.props.user.token\r\n          }\r\n        }\r\n      )\r\n        .then(res => {\r\n          self.showLoader(false);\r\n          if (res.data.is_err) {\r\n            ToastStore.error(res.data.message);\r\n          } else {\r\n            ToastStore.success(res.data.message);\r\n            self.props.history.push('/users/list');\r\n          }\r\n        })\r\n        .catch(err => {\r\n          self.showLoader(false);\r\n          ToastStore.error(err.message);\r\n        });\r\n    });\r\n  }\r\n  render() {\r\n    return <div className=\"animated fadeIn\">\r\n      <Row>\r\n        <Col>\r\n          <Card>\r\n            <CardHeader>\r\n              <strong>Add New User</strong>\r\n            </CardHeader>\r\n            <Form onSubmit={this.saveUser}>\r\n              <CardBody>\r\n                <ToastContainer store={ToastStore} />\r\n                <FormGroup>\r\n                  <Label htmlFor=\"name\">Name</Label>\r\n                  <Input type=\"text\" id=\"name\" onChange={e => this.changeInput('name', e.target.value)} placeholder=\"Enter Name\" />\r\n                  <span className=\"form-err\">{this.state.errors[\"name\"]}</span>\r\n                </FormGroup>\r\n                <FormGroup>\r\n                  <Label htmlFor=\"email\">Email</Label>\r\n                  <Input type=\"text\" id=\"email\" onChange={e => this.changeInput('email', e.target.value)} placeholder=\"Enter Email\" />\r\n                  <span className=\"form-err\">{this.state.errors[\"email\"]}</span>\r\n                </FormGroup>\r\n                <FormGroup>\r\n                  <Label htmlFor=\"password\">Password</Label>\r\n                  <Input type=\"password\" id=\"password\" onChange={e => this.changeInput('password', e.target.value)} placeholder=\"Enter Password\" />\r\n                  <span className=\"form-err\">{this.state.errors[\"password\"]}</span>\r\n                </FormGroup>\r\n                <FormGroup row>\r\n                  <Col md=\"2\">\r\n                    <Label>Status</Label>\r\n                  </Col>\r\n                  <Col md=\"10\">\r\n                    <FormGroup check inline className=\"radio\">\r\n                      <Input className=\"form-check-input\" onChange={e => this.changeInput('status', e.target.value)} type=\"radio\" id=\"status1\" name=\"status\" value=\"true\" />\r\n                      <Label check className=\"form-check-label\" htmlFor=\"status1\">Active</Label>\r\n                    </FormGroup>\r\n                    <FormGroup check inline className=\"radio\">\r\n                      <Input className=\"form-check-input\" onChange={e => this.changeInput('status', e.target.value)} type=\"radio\" id=\"status2\" name=\"status\" value=\"false\" />\r\n                      <Label check className=\"form-check-label\" htmlFor=\"status2\">Inactive</Label>\r\n                    </FormGroup>\r\n                    <span className=\"form-err\">{this.state.errors[\"status\"]}</span>\r\n                  </Col>\r\n                </FormGroup>\r\n              </CardBody>\r\n              <CardFooter>\r\n                <Button type=\"submit\" size=\"sm\" color=\"primary\">Submit</Button>\r\n                <Button type=\"reset\" size=\"sm\" color=\"danger\">Reset</Button>\r\n              </CardFooter>\r\n            </Form>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>;\r\n  }\r\n}\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.user\r\n  }\r\n}\r\nexport default connect(mapStateToProps)(AddUserComponent);"],"sourceRoot":""}