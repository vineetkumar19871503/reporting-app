(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{268:function(e,t,a){"use strict";var n={print:function(e){try{var t=document.getElementById(e).innerHTML,a=window.open("","Print","height=600,width=800");return a.document.write("<html><head><title></title>"),a.document.write("</head><body >"),a.document.write(t),a.document.write("</body></html>"),a.document.close(),a.focus(),a.print(),a.close(),!0}catch(n){console.log(n.message),alert("Please allow Pop-up for priting the bill.")}},moneyToWords:function(e){return a(269)(e)}};t.a=n},342:function(e,t,a){"use strict";a.r(t);var n=a(90),r=a(91),l=a(94),o=a(92),s=a(93),i=a(96),c=a(0),m=a.n(c),d=a(95),u=a(264),p=a.n(u),h=a(263),g=a(260),E=a(318),b=a.n(E),f=a(262),v=a.n(f),y=a(268),x=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(l.a)(this,Object(o.a)(t).call(this,e))).errors={},a.state={printData:{},shouldOpenAc:!1,consumers:[],fields:{k_number:"",consumer_name:"",amount:""},errors:{}},a.saveBill=a.saveBill.bind(Object(i.a)(Object(i.a)(a))),a.resetForm=a.resetForm.bind(Object(i.a)(Object(i.a)(a))),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){document.title="Add New Bill",this.getConsumers()}},{key:"changeInput",value:function(e,t){var a=Object.assign({},this.state);a.fields[e]=t,this.setState(a)}},{key:"resetForm",value:function(){this.setState({shouldOpenAc:!1,fields:{k_number:"",consumer_name:"",amount:""}})}},{key:"showLoader",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=document.getElementById("ajax-loader-container");e?t.classList.remove("disp-none"):t.classList.add("disp-none")}},{key:"getConsumers",value:function(e){var t=this;t.showLoader(),p.a.get(v.a.apiUrl+"consumers/list",{headers:{Authorization:"Bearer "+t.props.user.token}}).then(function(e){t.showLoader(!1);var a=e.data.data.map(function(e){return e.value=e.consumer_name,e.name=e.k_number,e});t.setState({consumers:a})}).catch(function(e){t.showLoader(!1),h.ToastStore.error(e.message)})}},{key:"validateForm",value:function(e){var t=!0;(this.errors={},t=this._validateField("required","k_number",t),t=this._validateField("required","consumer_name",t),t=this._validateField("required","amount",t),t=this._validateField("number","amount",t),this.errors.k_number)||11!==this.state.fields.k_number.trim().length&&(t=!1,this.errors.k_number="The length of K Number should be 11");this.setState({errors:this.errors}),t&&e()}},{key:"_validateField",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"required",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=this.state.fields,r=a;if(!this.errors[t]){switch(e){case"required":n[t]&&n[t].trim().length||(r=!1,this.errors[t]="This field cannot be empty");break;case"number":/^\d*$/.test(n[t])||(r=!1,this.errors[t]="Please enter number");break;default:return}return r}}},{key:"onKnoChange",value:function(e){var t=Object.assign({},this.state),a=!1;e.length>=8&&(a=!0),t.fields.k_number=e,t.shouldOpenAc=a,t.fields.consumer_name="",this.setState(t)}},{key:"onKnoSelect",value:function(e,t){var a=Object.assign({},this.state);a.fields.k_number=e,a.fields.consumer_name=t.consumer_name,a.shouldOpenAc=!1,this.setState(a)}},{key:"getTime",value:function(e){return(e=new Date(e)).getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()+" "+this.addZeroToTime(e.getHours())+":"+this.addZeroToTime(e.getMinutes())+":"+this.addZeroToTime(e.getSeconds())}},{key:"addZeroToTime",value:function(e){return e<10&&(e="0"+e),e}},{key:"printBill",value:function(){y.a.print("printContainer")}},{key:"getAmount",value:function(e){return e=Math.round(e),y.a.moneyToWords(e)}},{key:"saveBill",value:function(e){e.preventDefault();var t=this;t.validateForm(function(){t.showLoader();var e=t.state.fields;e.added_by=t.props.user._id,p.a.post(v.a.apiUrl+"bills/add",e,{headers:{Authorization:"Bearer "+t.props.user.token}}).then(function(e){t.showLoader(!1),e.data.is_err?h.ToastStore.error(e.data.message):(h.ToastStore.success(e.data.message),t.resetForm(),t.setState({printData:e.data.data},function(){return t.printBill()}))}).catch(function(e){t.showLoader(!1),h.ToastStore.error(e.message)})})}},{key:"render",value:function(){var e=this,t=this.state.printData;return m.a.createElement("div",{className:"animated fadeIn"},m.a.createElement(g.C,null,m.a.createElement(g.j,null,m.a.createElement(g.e,null,m.a.createElement(h.ToastContainer,{store:h.ToastStore}),m.a.createElement(g.i,null,m.a.createElement("strong",null,"Add New Bill")),m.a.createElement(g.p,{onSubmit:this.saveBill},m.a.createElement(g.f,null,m.a.createElement(g.q,null,m.a.createElement(g.v,{htmlFor:"k_number"},"K Number"),m.a.createElement("br",null),m.a.createElement("div",{className:"custom-form-field"},m.a.createElement(b.a,{items:this.state.consumers,inputProps:{placeholder:"Enter K Number",maxLength:"11"},shouldItemRender:function(t,a){return e.state.shouldOpenAc&&t.k_number.toLowerCase().indexOf(a.toLowerCase())>-1},getItemValue:function(e){return e.k_number},renderItem:function(e,t){return m.a.createElement("div",{key:e._id,className:"autocomplete-item",style:{backgroundColor:t?"#eee":"#fff"}},e.k_number)},value:this.state.fields.k_number,onChange:function(t){return e.onKnoChange(t.target.value)},onSelect:function(t,a){return e.onKnoSelect(t,a)}})),m.a.createElement("span",{className:"form-err"},this.state.errors.k_number)),m.a.createElement(g.q,null,m.a.createElement(g.v,{htmlFor:"consumer_name"},"Consumer Name"),m.a.createElement(g.r,{type:"text",id:"consumer_name",value:this.state.fields.consumer_name,onChange:function(t){return e.changeInput("consumer_name",t.target.value)},placeholder:"Enter Consumer Name"}),m.a.createElement("span",{className:"form-err"},this.state.errors.consumer_name)),m.a.createElement(g.q,null,m.a.createElement(g.v,{htmlFor:"amount"},"Amount"),m.a.createElement(g.r,{type:"text",id:"amount",value:this.state.fields.amount,onChange:function(t){return e.changeInput("amount",t.target.value)},placeholder:"Enter Amount"}),m.a.createElement("span",{className:"form-err"},this.state.errors.amount))),m.a.createElement(g.g,null,m.a.createElement(g.d,{type:"submit",size:"sm",color:"primary"},"Submit"),m.a.createElement(g.d,{type:"button",onClick:this.resetForm,size:"sm",color:"danger"},"Reset")))))),Object.keys(t).length>0?m.a.createElement("div",{id:"printContainer",style:{padding:"20px",display:"none"}},m.a.createElement("div",{style:{marginTop:"40px",width:"100%",textAlign:"center",borderBottom:"1px solid black",marginBottom:"15px"}},m.a.createElement("h2",null,"Government of Rajasthan",m.a.createElement("br",null),"District e-Governance Society (Jodhpur)")),m.a.createElement("table",{border:"0",cellPadding:"0",cellSpacing:"0",width:"100%",style:{marginBottom:"15px"}},m.a.createElement("tbody",null,m.a.createElement("tr",null,m.a.createElement("td",{width:"50%",style:k.allBorders},m.a.createElement("div",{style:{padding:"15px"}})),m.a.createElement("td",{style:k.allBordersExceptLeft},m.a.createElement("div",{style:{padding:"15px"}},"Code: K21005887 [ AKSH.AKSH.2366.JOD ] ",m.a.createElement("br",null),"Kiosk: AKSH OPTIFIBRE LTD ",m.a.createElement("br",null),"LSP: AKSH OPTIFIBRE ",m.a.createElement("br",null),"Phone: 9928268192 ",m.a.createElement("br",null),"Email: SENSANETWORKING@GMAIL.COM"))))),m.a.createElement("table",{cellPadding:"0",cellSpacing:"0",border:"0",width:"100%",style:{marginBottom:"15px"}},m.a.createElement("tbody",null,m.a.createElement("tr",null,m.a.createElement("td",{width:"50%",style:{paddingLeft:"30px"}},m.a.createElement("strong",null,"Receipt No:")," ",t.receipt_number),m.a.createElement("td",{style:{paddingLeft:"30px"}},m.a.createElement("strong",null,"Receipt Date/Time:")," ",this.getTime(t.bill_submission_date))))),m.a.createElement("table",{cellPadding:"0",cellSpacing:"0",border:"0",width:"100%"},m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",{align:"center",style:k.allBorders},"Sr No."),m.a.createElement("th",{align:"center",style:k.allBordersExceptLeft},"Department/Service"),m.a.createElement("th",{align:"center",style:k.allBordersExceptLeft},"Consumer Info"),m.a.createElement("th",{align:"center",style:k.allBordersExceptLeft},"Trans ID"),m.a.createElement("th",{align:"center",style:k.allBordersExceptLeft},"Mode Ref No"),m.a.createElement("th",{align:"center",style:k.allBordersExceptLeft},"Amount"))),m.a.createElement("tbody",null,m.a.createElement("tr",null,m.a.createElement("td",{align:"center",style:k.allBordersExceptTop},"1"),m.a.createElement("td",{align:"center",style:k.allBordersExceptTopAndLeft},"DISCOM/K No"),m.a.createElement("td",{align:"center",style:k.allBordersExceptTopAndLeft},(t.consumer.k_number+"/"+t.consumer.consumer_name).toUpperCase()),m.a.createElement("td",{align:"center",style:k.allBordersExceptTopAndLeft},t.trans_id),m.a.createElement("td",{align:"center",style:k.allBordersExceptTopAndLeft},t.payment_mode.toUpperCase()),m.a.createElement("td",{align:"right",style:k.allBordersExceptTopAndLeft},m.a.createElement("div",{style:{paddingRight:"15px"}},t.amount.toFixed(4)))),m.a.createElement("tr",null,m.a.createElement("td",{colSpan:"5",style:k.allBordersExceptTop},m.a.createElement("strong",{style:{paddingLeft:"15px"}},"Grand Total")),m.a.createElement("td",{align:"right",style:k.allBordersExceptTopAndLeft},m.a.createElement("strong",{style:{paddingRight:"15px"}},t.amount.toFixed(4)))))),m.a.createElement("div",{style:{marginTop:"8px",fontSize:"15px",fontStyle:"italic"}},"Disclaimer: Payment through Cheque or DD are subject to realization."),m.a.createElement("div",{style:{marginTop:"30px"}},"Received Amount Rs. ",t.amount.toFixed(4)," ( Rupees ",this.getAmount(t.amount)," Only )"),m.a.createElement("div",{style:{textAlign:"center",fontStyle:"italic",fontSize:"15px",marginTop:"40px"}},"(This is a computer generated receipt and requires no signature)")):null)}}]),t}(m.a.Component),k={allBorders:{border:"1px solid black"},allBordersExceptLeft:{borderTop:"1px solid black",borderRight:"1px solid black",borderBottom:"1px solid black"},allBordersExceptTop:{borderLeft:"1px solid black",borderRight:"1px solid black",borderBottom:"1px solid black"},allBordersExceptTopAndLeft:{borderRight:"1px solid black",borderBottom:"1px solid black"}};t.default=Object(d.b)(function(e){return{user:e.user}})(x)}}]);
//# sourceMappingURL=13.ad3a33a6.chunk.js.map